# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           python 1.0
PortGroup           github 1.0

github.setup        cvxopt cvxopt 1.1.8
revision            3
name                py-cvxopt
categories-append   math
platforms           darwin
license             GPL-3+
maintainers         gmail.com:jjstickel openmaintainer

description         Python module for convex optimization
long_description    CVXOPT is a free software package for convex \
                    optimization based on the Python programming \
                    language. It can be used with the interactive \
                    Python interpreter, on the command line by \
                    executing Python scripts, or integrated in other \
                    software via Python extension modules. Its main \
                    purpose is to make the development of software for \
                    convex optimization applications straightforward \
                    by building on Python's extensive standard library \
                    and on the strengths of Python as a high-level \
                    programming language.
homepage            http://cvxopt.org/

checksums           rmd160  0f527df6da0d9d940b337306a7ed7bb55cd63b30 \
                    sha256  bdc67b65471486e09e51fc1811d102b89fb95041e5deec71f3a74b132d4941fe

python.versions     27 33 34 35 36

if {${subport} ne ${name}} {
    # fix typo
    patchfiles      patch-setup.py.diff

    variant atlas description {Use ATLAS for BLAS and LAPACK} {
        depends_lib-append  port:atlas

        build.env-append \
            CVXOPT_BLAS_LIB_DIR="${prefix}/lib" \
            CVXOPT_LAPACK_LIB="tatlas" \
            CVXOPT_BLAS_LIB="tatlas"
    }

    if { ![variant_isset atlas] } {
        # atlas' version ${prefix}/lib/liblapack.a is used
        conflicts-append atlas
    }

    variant gsl description {Build GSL module} {
        depends_lib-append  port:gsl

        build.env-append \
            CVXOPT_BUILD_GSL=1 \
            CVXOPT_GSL_LIB_DIR=${prefix}/lib \
            CVXOPT_GSL_INC_DIR=${prefix}/include
    }

    variant fftw description {Build FFTW module} {
        depends_lib-append  port:fftw-3

        build.env-append \
            CVXOPT_BUILD_FFTW=1 \
            CVXOPT_FFTW_LIB_DIR=${prefix}/lib \
            CVXOPT_FFTW_INC_DIR=${prefix}/include
    }

    variant glpk description {Build GLPK module} {
        depends_lib-append  port:glpk

        build.env-append \
            CVXOPT_BUILD_GLPK=1 \
            CVXOPT_GLPK_LIB_DIR=${prefix}/lib \
            CVXOPT_GLPK_INC_DIR=${prefix}/include
    }

    variant dsdp description {Build DSDP module} {
        depends_lib-append  port:DSDP

        build.env-append \
            CVXOPT_BUILD_DSDP=1 \
            CVXOPT_DSDP_LIB_DIR=${prefix}/lib \
            CVXOPT_DSDP_INC_DIR=${prefix}/include
    }

    default_variants +gsl +glpk +fftw +dsdp

    livecheck.type 	none
}
